<Page
    x:Class="Video_Clip2.DrawPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:xaml="using:Microsoft.Graphics.Canvas.UI.Xaml"
    xmlns:draggers="using:Video_Clip2.Clips.Draggers"
    xmlns:controls1="using:Video_Clip2.Controls"
    xmlns:easings="using:Video_Clip2.Easings"
    xmlns:elements="using:Video_Clip2.Elements"
    xmlns:times="using:Video_Clip2.Elements.Times"
    xmlns:transitions="using:Video_Clip2.Elements.Transitions"
    xmlns:elements1="using:Video_Clip2.Tools.Elements"
    Background="Black" 
    mc:Ignorable="d"
    >


    <Page.Resources>
        <!--Double-->
        <x:Double x:Key="AppBarHeight">48</x:Double>
        <x:Double x:Key="TrackLeftWidth">72</x:Double>
        <x:Double x:Key="TimelineHeight">30</x:Double>

        <!--StaticResource-->
        <SolidColorBrush x:Key="ListViewItemBackgroundSelected" Color="{ThemeResource SystemAccentColor}"/>
        <SolidColorBrush x:Key="ListViewItemBackgroundSelectedPointerOver" Color="{ThemeResource SystemAccentColor}"/>
        <SolidColorBrush x:Key="ListViewItemBackgroundSelectedPressed" Color="{ThemeResource SystemAccentColor}"/>
        <SolidColorBrush x:Key="ListViewItemForegroundSelected" Color="White"/>
        <SolidColorBrush x:Key="ListViewItemForegroundSelectedPointerOver" Color="White"/>
        <SolidColorBrush x:Key="ListViewItemForegroundSelectedPressed" Color="White"/>

        <!--Storyboard-->
        <Storyboard x:Name="Storyboard">
            <DoubleAnimation x:Name="Animation" From="{x:Null}" To="{x:Null}" Duration="0:0:0.6" 
                             Storyboard.TargetProperty="Height" Storyboard.TargetName="PreviewGrid" 
                             EnableDependentAnimation="True">
                <DoubleAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!--Style-->
        <Style TargetType="ScrollViewer">
            <Setter Property="HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="VerticalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="HorizontalScrollMode" Value="Enabled"/>
            <Setter Property="IsHorizontalRailEnabled" Value="False"/>
            <Setter Property="VerticalScrollMode" Value="Disabled"/>
            <Setter Property="IsVerticalRailEnabled" Value="True"/>
            <Setter Property="ZoomMode" Value="Disabled"/>
            <Setter Property="IsDeferredScrollingEnabled" Value="False"/>
            <Setter Property="BringIntoViewOnFocusChange" Value="True"/>
        </Style>
        <Style x:Key="MenuFlyoutItemStyle" TargetType="MenuFlyoutItem">
            <Setter Property="MinWidth" Value="200"/>
            <Setter Property="Height" Value="44"/>
        </Style>
        <Style x:Key="AppToolTipStyle" TargetType="ToolTip">
            <Setter Property="BorderBrush" Value="{ThemeResource AppBlueLinearGradientBrush}"/>
            <Setter Property="Background" Value="{ThemeResource AppBlueLinearGradientBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <!--Flyout-->
        <MenuFlyout x:Name="EditFlyout" Placement="Top">
            <MenuFlyout.MenuFlyoutPresenterStyle>
                <Style TargetType="MenuFlyoutPresenter">
                    <Setter Property="Padding" Value="0"/>
                </Style>
            </MenuFlyout.MenuFlyoutPresenterStyle>
        </MenuFlyout>
    </Page.Resources>


    <Grid>

        <!--VisualState-->
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>

                <!--Phone-->
                <VisualState x:Name="Phone">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="HelpButton2.Visibility" Value=" Visible"/>
                        <Setter Target="FullScreenButton2.Visibility" Value=" Visible"/>
                        <Setter Target="HelpButton.Visibility" Value="Collapsed"/>
                        <Setter Target="FullScreenButton.Visibility" Value="Collapsed"/>

                        <Setter Target="PreviewGrid.(Grid.RowSpan)" Value="2"/>
                        <Setter Target="AppBarBorder.Visibility" Value="Collapsed"/>

                        <Setter Target="ToolTypeComboBox.(Grid.Row)" Value="3"/>
                        <Setter Target="TimeButton.Margin" Value="0"/>
                        <Setter Target="TimeButton.RequestedTheme" Value="Dark"/>
                        <Setter Target="AppBarLeftStackPanel.HorizontalAlignment" Value="Right"/>
                        <Setter Target="AppBarLeftStackPanel.RequestedTheme" Value="Dark"/>
                        <Setter Target="PlayGrid.RequestedTheme" Value="Dark"/>
                        <Setter Target="AppBarRightStackPanel.(Grid.Row)" Value="3"/>
                        <Setter Target="AppBarRightStackPanel.Margin" Value="0"/>
                        <Setter Target="AppBarRightStackPanel.HorizontalAlignment" Value="Center"/>
                        <Setter Target="AppBarRightStackPanel.Background" Value="{x:Null}"/>
                        <Setter Target="ScaleSlider.Visibility" Value="Collapsed"/>
                        <Setter Target="SpliterButton.(Grid.Row)" Value="3"/>
                    </VisualState.Setters>
                </VisualState>

                <!--Pad-->
                <VisualState x:Name="Pad">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="600" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="PreviewGrid.(Grid.RowSpan)" Value="2"/>
                        <Setter Target="AppBarBorder.Visibility" Value="Collapsed"/>

                        <Setter Target="ToolTypeComboBox.(Grid.Row)" Value="3"/>
                        <Setter Target="TimeButton.Margin" Value="0"/>
                        <Setter Target="TimeButton.RequestedTheme" Value="Dark"/>
                        <Setter Target="AppBarLeftStackPanel.HorizontalAlignment" Value="Right"/>
                        <Setter Target="AppBarLeftStackPanel.RequestedTheme" Value="Dark"/>
                        <Setter Target="PlayGrid.RequestedTheme" Value="Dark"/>
                        <Setter Target="AppBarRightStackPanel.(Grid.Row)" Value="3"/>
                        <Setter Target="AppBarRightStackPanel.Margin" Value="0"/>
                        <Setter Target="AppBarRightStackPanel.HorizontalAlignment" Value="Center"/>
                        <Setter Target="AppBarRightStackPanel.Background" Value="{x:Null}"/>
                        <Setter Target="ScaleSlider.Visibility" Value="Collapsed"/>
                        <Setter Target="SpliterButton.(Grid.Row)" Value="3"/>
                    </VisualState.Setters>
                </VisualState>

                <!--PC-->
                <VisualState x:Name="PC">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="900" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="TimeButton.(Grid.Row)" Value="0"/>
                        <Setter Target="TimeButton.Margin" Value="0"/>
                        <Setter Target="TimeButton.VerticalAlignment" Value="Bottom"/>
                        <Setter Target="TimeButton.RequestedTheme" Value="Dark"/>
                        <Setter Target="AppBarLeftStackPanel.Margin" Value="72,0,0,0"/>
                        <Setter Target="AppBarRightStackPanel.Margin" Value="0,0,72,0"/>
                        <Setter Target="ScaleSlider.(Grid.Row)" Value="0"/>
                        <Setter Target="ScaleSlider.Margin" Value="0"/>
                        <Setter Target="ScaleSlider.VerticalAlignment" Value="Bottom"/>
                        <Setter Target="ScaleSlider.RequestedTheme" Value="Dark"/>
                    </VisualState.Setters>
                </VisualState>

                <!--Hub-->
                <VisualState x:Name="Hub">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="1100" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                    </VisualState.Setters>
                </VisualState>

            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>


        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="48" MinHeight="48" MaxHeight="48"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>


        <!--Extension-->
        <elements:ApplicationTitleBarExtension x:Name="ApplicationView" TitleBarColor="Black"/>



        <!--Preview-->
        <controls1:PreviewCanvas x:Name="PreviewGrid"
                   Height="276" MinHeight="100" MaxHeight="700"
                   Scale2="{x:Bind ViewModel.Scale, Mode=TwoWay}" Size2="{x:Bind ViewModel.Size, Mode=OneWay}">
            <xaml:CanvasControl x:Name="PreviewCanvas" Width="1920" Height="1080" ClearColor="Black">
                <UIElement.RenderTransformOrigin>
                    0, 0
                </UIElement.RenderTransformOrigin>
                <UIElement.RenderTransform>
                    <CompositeTransform ScaleX="1" ScaleY="1" TranslateX="0" TranslateY="0"/>
                </UIElement.RenderTransform>
            </xaml:CanvasControl>
        </controls1:PreviewCanvas>

        <Grid Padding="12" RequestedTheme="Dark" VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <!--Home-->
            <Button IsEnabled="False" Background="{ThemeResource AppBackgroundLight}">
                <StackPanel Orientation="Horizontal">
                    <SymbolIcon Symbol="Home" Width="32"/>
                    <TextBlock Margin="4,0">
                        Home
                    </TextBlock>
                </StackPanel>
            </Button>
            <!--Help-->
            <Button x:Name="HelpButton2" IsEnabled="False" Grid.Column="1" Visibility="Collapsed" Width="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Help
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="Help"/>
            </Button>
            <!--FullScreen-->
            <Button x:Name="FullScreenButton2" Grid.Column="3" Visibility="Collapsed" Width="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Full Screen
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="{x:Bind BooleanToFullScreenConverter(PreviewGrid.IsFullScreen), Mode=OneWay}"/>
            </Button>
            <!--Export-->
            <Button x:Name="ExportButton" Grid.Column="4" Background="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource AccentButtonStyle}">
                <StackPanel Orientation="Horizontal">
                    <SymbolIcon Symbol="NewWindow" Width="32"/>
                    <TextBlock Margin="4,0">
                        Export
                    </TextBlock>
                </StackPanel>
            </Button>
        </Grid>



        <!--Track-->
        <ScrollViewer x:Name="TrackScrollViewer" Grid.Row="2" IsHitTestVisible="{x:Bind IntToBooleanConverter(GroupIndex), Mode=OneWay}" Background="{ThemeResource AppBackground}">
            <Border x:Name="TrackCanvas" Background="Transparent"
                        ManipulationMode="{x:Bind ToolTypeComboBox.Tool.TrackManipulationMode, Mode=OneWay}"
                        ManipulationStarted="{x:Bind ToolTypeComboBox.Tool.TrackManipulationStarted, Mode=OneWay}"
                        ManipulationDelta="{x:Bind ToolTypeComboBox.Tool.TrackManipulationDelta, Mode=OneWay}"
                        ManipulationCompleted="{x:Bind ToolTypeComboBox.Tool.TrackManipulationCompleted, Mode=OneWay}"
                        >
                <Canvas Width="{x:Bind PositionCanvas.Width, Mode=OneWay}" HorizontalAlignment="Left">


                    <!--Rectangle-->
                    <controls1:RectangleCanvas x:Name="RectangleCanvas"
                        MaximumRows="6" IsHitTestVisible="False"
                        Canvas.Left="{StaticResource TrackLeftWidth}"
                        Canvas.Top="{StaticResource TimelineHeight}"
                        ItemWidth="{x:Bind PositionCanvas.Width, Mode=OneWay}"
                        ItemHeight="{x:Bind ViewModel.TrackHeight, Mode=OneWay}">
                        <controls1:RectangleCanvas.LightStyle>
                            <Style TargetType="Rectangle">
                                <Setter Property="StrokeThickness" Value="1"/>
                                <Setter Property="Stroke" Value="{ThemeResource AppStroke}"/>
                                <Setter Property="Fill" Value="{ThemeResource AppBackgroundMediumLight}"/>
                            </Style>
                        </controls1:RectangleCanvas.LightStyle>
                        <controls1:RectangleCanvas.DarkStyle>
                            <Style TargetType="Rectangle">
                                <Setter Property="StrokeThickness" Value="1"/>
                                <Setter Property="Stroke" Value="{ThemeResource AppStroke}"/>
                                <Setter Property="Fill" Value="{ThemeResource AppBackgroundMediumDark}"/>
                            </Style>
                        </controls1:RectangleCanvas.DarkStyle>
                    </controls1:RectangleCanvas>
                    <!--Items-->
                    <controls1:ItemCanvas x:Name="ItemCanvas"
                        Canvas.Left="{StaticResource TrackLeftWidth}"
                        Canvas.Top="{StaticResource TimelineHeight}"
                        Width="{x:Bind PositionCanvas.Width, Mode=OneWay}"
                        ItemSource="{x:Bind ViewModel.ObservableCollection, Mode=OneWay}"
                        ItemClick="{x:Bind ToolTypeComboBox.Tool.ItemClick, Mode=OneWay}"
                        ItemManipulationStarted="{x:Bind ToolTypeComboBox.Tool.ItemManipulationStarted, Mode=OneWay}"
                        ItemManipulationDelta="{x:Bind ToolTypeComboBox.Tool.ItemManipulationDelta, Mode=OneWay}"
                        ItemManipulationCompleted="{x:Bind ToolTypeComboBox.Tool.ItemManipulationCompleted, Mode=OneWay}"
                         />


                    <StackPanel Width="{StaticResource TrackLeftWidth}">
                        <!--Track-->
                        <ComboBox x:Name="TrackComboBox"
                             SelectedIndex="2" 
                             Width="{StaticResource TrackLeftWidth}" Height="{StaticResource TimelineHeight}"
                              BorderThickness="0" BorderBrush="{ThemeResource AppBorderBrush}" Background="Transparent">
                            <UIElement.ManipulationMode>
                                None
                            </UIElement.ManipulationMode>
                            <ToolTipService.ToolTip>
                                <ToolTip Style="{StaticResource AppToolTipStyle}">
                                    Track Height
                                </ToolTip>
                            </ToolTipService.ToolTip>
                            <x:Int32>30</x:Int32>
                            <x:Int32>40</x:Int32>
                            <x:Int32>50</x:Int32>
                            <x:Int32>60</x:Int32>
                            <x:Int32>70</x:Int32>
                        </ComboBox>
                        <!--Mute-->
                        <ToggleButton 
                             IsChecked="{x:Bind ViewModel.IsMuted, Mode=TwoWay}"
                             Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" 
                             Foreground="{ThemeResource AppBlueLinearGradientBrush}" Background="{ThemeResource AppBackgroundColorMediumLight}" Style="{StaticResource TextBlockButtonStyle}">
                            <UIElement.ManipulationMode>
                                None
                            </UIElement.ManipulationMode>
                            <ToolTipService.ToolTip>
                                <ToolTip Style="{StaticResource AppToolTipStyle}">
                                    Mute
                                </ToolTip>
                            </ToolTipService.ToolTip>
                            <SymbolIcon Symbol="{x:Bind BooleanToMuteConverter(ViewModel.IsMuted), Mode=OneWay}"/>
                        </ToggleButton>
                        <!--Freedom-->
                        <ToggleButton 
                             IsChecked="{x:Bind IsDirectFreedom, Mode=TwoWay}"
                             Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" 
                             Foreground="{ThemeResource AppBlueLinearGradientBrush}" Background="{ThemeResource AppBackgroundColorMediumLight}" Style="{StaticResource TextBlockButtonStyle}">
                            <UIElement.ManipulationMode>
                                None
                            </UIElement.ManipulationMode>
                            <ToolTipService.ToolTip>
                                <ToolTip Style="{StaticResource AppToolTipStyle}">
                                    Freedom
                                </ToolTip>
                            </ToolTipService.ToolTip>
                            <SymbolIcon Symbol="{x:Bind BooleanToFreedomConverter(IsDirectFreedom), Mode=OneWay}"/>
                        </ToggleButton>
                    </StackPanel>


                    <!--Position-->
                    <controls1:PositionCanvas x:Name="PositionCanvas"
                        Canvas.Left="{StaticResource TrackLeftWidth}" Canvas.Top="0"
                        IsHitTestVisible="{x:Bind IsDirectFreedom, Mode=OneWay}"
                        Duration="{x:Bind ViewModel.Duration, Mode=OneWay}"
                        TrackScale="{x:Bind ViewModel.TrackScale, Mode=OneWay}"
                        Width="{x:Bind PositionCanvas.Width, Mode=OneWay}" Height="{StaticResource TimelineHeight}"
                        Background="Transparent">
                        <UIElement.ManipulationMode>
                            System,
                            TranslateX
                        </UIElement.ManipulationMode>
                    </controls1:PositionCanvas>
                    <controls1:PinCanvas x:Name="PinCanvas"
                        Canvas.Left="{StaticResource TrackLeftWidth}" Canvas.Top="0"
                        ItemSource="{x:Bind ViewModel.PinCollection, Mode=OneWay}"
                        Position="{x:Bind ViewModel.Position, Mode=TwoWay}"
                        TrackScale="{x:Bind ViewModel.TrackScale, Mode=OneWay}"
                        Width="{x:Bind PositionCanvas.Width, Mode=OneWay}" Height="{StaticResource TimelineHeight}">
                        <controls1:PinCanvas.ItemStyle>
                            <Style TargetType="Button">
                                <Setter Property="Width" Value="18"/>
                                <Setter Property="Height" Value="32"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Polygon 
                                                StrokeThickness="2"
                                                Fill="{ThemeResource AppRedLinearGradientBrush}">

                                                <Polygon.Stroke>
                                                    <SolidColorBrush x:Name="SolidColorBrush" Color="Transparent"/>
                                                </Polygon.Stroke>

                                                <!--VisualState-->
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="CommonStates">

                                                        <VisualState x:Name="Normal"/>

                                                        <VisualState x:Name="PointerOver">
                                                            <Storyboard>
                                                                <ColorAnimation Storyboard.TargetName="SolidColorBrush" Storyboard.TargetProperty="Color"
                                                                                Duration="00:00:00.2" To="White">
                                                                </ColorAnimation>
                                                            </Storyboard>
                                                        </VisualState>

                                                        <VisualState x:Name="Pressed">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SolidColorBrush" Storyboard.TargetProperty="Color">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="White" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>

                                                        <VisualState x:Name="Disabled">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SolidColorBrush" Storyboard.TargetProperty="Color">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="White" />
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>

                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>

                                                <Polygon.Points>
                                                    9, 2
                                                    0, 14
                                                    9, 26
                                                    18, 14
                                                </Polygon.Points>
                                            </Polygon>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </controls1:PinCanvas.ItemStyle>
                    </controls1:PinCanvas>
                    <controls1:PinHeader x:Name="PinHeader"
                       IsHitTestVisible="False" 
                       Width="12" Height="{StaticResource TimelineHeight}"
                       Position="{x:Bind ViewModel.Position, Mode=OneWay}"
                       TrackScale="{x:Bind ViewModel.TrackScale, Mode=OneWay}">
                        <Border IsHitTestVisible="False" 
                          Width="12" Height="{StaticResource TimelineHeight}"
                          Visibility="{x:Bind BooleanToVisibilityConverter(IsDirectFreedom), Mode=OneWay}"
                          CornerRadius="0,0,4,4" BorderThickness="2" BorderBrush="{ThemeResource AppRedAbsoluteLinearGradientBrush}"/>
                    </controls1:PinHeader>


                    <Canvas Canvas.Left="{StaticResource TrackLeftWidth}" Canvas.Top="{StaticResource TimelineHeight}">

                        <!--Dragger-->
                        <draggers:ThumbDragger x:Name="ThumbDragger" Visibility="Collapsed" 
                                           SelectionMode="{x:Bind ViewModel.SelectionMode, Mode=OneWay}" 
                                           Trimmer="{x:Bind ViewModel.Trimmer, Mode=OneWay}" 
                                           TrackHeight="{x:Bind ViewModel.TrackHeight, Mode=OneWay}"
                                           ManipulationStarted="{x:Bind ToolTypeComboBox.Tool.ThumbDraggerManipulationStarted, Mode=OneWay}"
                                           ManipulationDelta="{x:Bind ToolTypeComboBox.Tool.ThumbDraggerManipulationDelta, Mode=OneWay}"
                                           ManipulationCompleted="{x:Bind ToolTypeComboBox.Tool.ThumbDraggerManipulationCompleted, Mode=OneWay}"
                                           >
                            <UIElement.ManipulationMode>
                                System,
                                TranslateX,
                                TranslateY
                            </UIElement.ManipulationMode>
                        </draggers:ThumbDragger>
                        <draggers:LeftDragger x:Name="LeftDragger" Visibility="Collapsed" 
                                          SelectionMode="{x:Bind ViewModel.SelectionMode, Mode=OneWay}" 
                                          Trimmer="{x:Bind ViewModel.Trimmer, Mode=OneWay}" 
                                          TrackHeight="{x:Bind ViewModel.TrackHeight, Mode=OneWay}" 
                                          ManipulationStarted="{x:Bind ToolTypeComboBox.Tool.LeftDraggerManipulationStarted, Mode=OneWay}"
                                          ManipulationDelta="{x:Bind ToolTypeComboBox.Tool.LeftDraggerManipulationDelta, Mode=OneWay}"
                                          ManipulationCompleted="{x:Bind ToolTypeComboBox.Tool.LeftDraggerManipulationCompleted, Mode=OneWay}"
                                          Height="{x:Bind ViewModel.TrackHeight, Mode=OneWay}"
                                          >
                            <UIElement.ManipulationMode>
                                System,
                                TranslateX
                            </UIElement.ManipulationMode>
                        </draggers:LeftDragger>
                        <draggers:RightDragger x:Name="RightDragger" Visibility="Collapsed" 
                                           SelectionMode="{x:Bind ViewModel.SelectionMode, Mode=OneWay}" 
                                           Trimmer="{x:Bind ViewModel.Trimmer, Mode=OneWay}" 
                                           TrackHeight="{x:Bind ViewModel.TrackHeight, Mode=OneWay}" 
                                           ManipulationStarted="{x:Bind ToolTypeComboBox.Tool.RightDraggerManipulationStarted, Mode=OneWay}"
                                           ManipulationDelta="{x:Bind ToolTypeComboBox.Tool.RightDraggerManipulationDelta, Mode=OneWay}"
                                           ManipulationCompleted="{x:Bind ToolTypeComboBox.Tool.RightDraggerManipulationCompleted, Mode=OneWay}"
                                           Height="{x:Bind ViewModel.TrackHeight, Mode=OneWay}"
                                           >
                            <UIElement.ManipulationMode>
                                System,
                                TranslateX
                            </UIElement.ManipulationMode>
                        </draggers:RightDragger>

                        <!--Timeline-->
                        <Line IsHitTestVisible="False" 
                              Visibility="{x:Bind BooleanToVisibilityConverter(IsDirectFreedom), Mode=OneWay}"
                              X1="{x:Bind PinHeader.X, Mode=OneWay}" Y1="0" 
                              X2="{x:Bind PinHeader.X, Mode=OneWay}" Y2="512" 
                              StrokeThickness="2" Stroke="{ThemeResource AppRedAbsoluteLinearGradientBrush}"/>

                    </Canvas>

                </Canvas>
            </Border>
        </ScrollViewer>



        <!--Button-->
        <ListView Grid.Row="2" SelectionMode="None" Width="{StaticResource TrackLeftWidth}" HorizontalAlignment="Right" VerticalAlignment="Top" Style="{x:Null}">
            <ListView.Resources>
                <Style TargetType="Button" BasedOn="{StaticResource TextBlockButtonStyle}">
                    <Setter Property="Foreground" Value="{ThemeResource AppBlueLinearGradientBrush}"/>
                    <Setter Property="HorizontalAlignment" Value="Stretch"/>
                    <Setter Property="VerticalAlignment" Value="Stretch"/>
                </Style>
            </ListView.Resources>
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Width" Value="{StaticResource AppBarHeight}"/>
                    <Setter Property="Height" Value="{StaticResource AppBarHeight}"/>
                    <Setter Property="MinWidth" Value="32"/>
                    <Setter Property="MinHeight" Value="32"/>
                    <Setter Property="Padding" Value="2"/>
                    <Setter Property="BorderThickness" Value="2"/>
                    <Setter Property="BorderBrush" Value="{ThemeResource ApplicationForegroundThemeBrush}"/>
                    <Setter Property="Background" Value="{ThemeResource ApplicationPageBackgroundThemeBrush}"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ListViewItem">
                                <Border CornerRadius="3" Margin="{TemplateBinding Padding}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}">
                                    <ContentPresenter x:Name="ListViewItemContentPresenter"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.Header>
                <Border Width="{StaticResource TrackLeftWidth}" Height="{StaticResource TimelineHeight}"/>
            </ListView.Header>
            <!--Add-->
            <Button>
                <ToolTipService.ToolTip>
                    <ToolTip Placement="Left">
                        Add
                    </ToolTip>
                </ToolTipService.ToolTip>
                <Button.Flyout>
                    <MenuFlyout Placement="Left">
                        <MenuFlyout.MenuFlyoutPresenterStyle>
                            <Style TargetType="MenuFlyoutPresenter">
                                <Setter Property="Padding" Value="0"/>
                            </Style>
                        </MenuFlyout.MenuFlyoutPresenterStyle>
                        <MenuFlyoutItem x:Name="AddVideoItem" BorderThickness="3,0,0,0" BorderBrush="BlueViolet" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Video"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Add From Video
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem x:Name="AddAudioItem" BorderThickness="3,0,0,0" BorderBrush="Fuchsia" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Audio"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Add From Audio
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem x:Name="AddImageItem" BorderThickness="3,0,0,0" BorderBrush="DodgerBlue" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Pictures"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Add From Image
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem x:Name="AddColorItem" BorderThickness="3,0,0,0" BorderBrush="DarkGray" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Flag"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Add From Color
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem x:Name="AddTextItem" BorderThickness="3,0,0,0" BorderBrush="Orange" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="FontSize"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Add From Text
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem x:Name="AddSubtitleItem" BorderThickness="3,0,0,0" BorderBrush="OrangeRed" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="FontColor"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Add From Subtitle
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                    </MenuFlyout>
                </Button.Flyout>
                <SymbolIcon Symbol="Add"/>
            </Button>
            <!--Edit-->
            <Button x:Name="EditButton">
                <ToolTipService.ToolTip>
                    <ToolTip Placement="Left">
                        Edit
                    </ToolTip>
                </ToolTipService.ToolTip>
                <Button.Flyout>
                    <MenuFlyout Placement="Left">
                        <MenuFlyout.MenuFlyoutPresenterStyle>
                            <Style TargetType="MenuFlyoutPresenter">
                                <Setter Property="Padding" Value="0"/>
                            </Style>
                        </MenuFlyout.MenuFlyoutPresenterStyle>
                        <MenuFlyoutItem x:Name="EditCutItem" IsEnabled="False" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Cut" Foreground="{ThemeResource AppBlueLinearGradientBrush}"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Cut
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem x:Name="EditCopyItem" IsEnabled="False" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Copy" Foreground="{ThemeResource AppBlueLinearGradientBrush}"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Copy
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem x:Name="EditPasteItem" IsEnabled="False" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Paste" Foreground="{ThemeResource AppBlueLinearGradientBrush}"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Paste
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem x:Name="EditClearItem" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Delete" Foreground="{ThemeResource AppRedLinearGradientBrush}"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Clear
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutSeparator/>
                        <MenuFlyoutItem IsEnabled="False" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="SelectAll" Foreground="{ThemeResource AppBlueLinearGradientBrush}"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                SelectAll
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem IsEnabled="False" Style="{StaticResource MenuFlyoutItemStyle}">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="ClearSelection" Foreground="{ThemeResource AppBlueLinearGradientBrush}"/>
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.Text>
                                Deselect
                            </MenuFlyoutItem.Text>
                        </MenuFlyoutItem>
                    </MenuFlyout>
                </Button.Flyout>
                <SymbolIcon Symbol="Preview"/>
            </Button>
            <!--Transition-->
            <Button x:Name="TransitionButton">
                <ToolTipService.ToolTip>
                    <ToolTip Placement="Left">
                        Transition
                    </ToolTip>
                </ToolTipService.ToolTip>
                <PathIcon>
                    <PathIcon.Data>
                        M20.019,13.154C20.019,13.341 19.94,13.519 19.802,13.646L17.837,15.44L17.726,15.509L17.605,15.555L17.485,15.577L17.362,15.576L17.246,15.553L17.212,15.543C17.159,15.524 17.108,15.499 17.06,15.467L16.971,15.396L10.01,8.788L3.024,15.418L2.959,15.467C2.911,15.499 2.86,15.524 2.807,15.543L2.687,15.572L2.569,15.579L2.443,15.563L2.322,15.523L2.208,15.459L2.14,15.404L0.217,13.646C0.079,13.519 -0,13.341 0,13.154L0,2.425C0,2.238 0.079,2.059 0.217,1.933L2.182,0.139L2.293,0.069L2.414,0.023L2.534,0.002L2.657,0.003L2.773,0.025L2.807,0.036C2.86,0.054 2.911,0.079 2.959,0.111L3.048,0.183L10.01,6.79L16.995,0.161L17.06,0.111C17.108,0.079 17.159,0.054 17.212,0.036L17.332,0.007L17.45,0L17.576,0.016L17.697,0.056L17.811,0.119L17.88,0.174L19.802,1.933C19.94,2.059 20.019,2.238 20.019,2.425L20.019,13.154ZM1.333,2.861L1.333,12.718C1.333,12.718 2.596,13.977 2.596,13.977L8.97,7.789L2.596,1.602L1.333,2.861ZM11.049,7.789L17.423,13.977L18.686,12.718L18.686,2.861C18.686,2.861 17.423,1.602 17.423,1.602L11.049,7.789Z
                    </PathIcon.Data>
                </PathIcon>
            </Button>
        </ListView>



        <!--Timeline-->
        <Line Grid.Row="2" IsHitTestVisible="False" 
                HorizontalAlignment="Center" VerticalAlignment="Top"
                Visibility="{x:Bind ReverseBooleanToVisibilityConverter(IsDirectFreedom), Mode=OneWay}"
                X1="0" Y1="0" 
                X2="0" Y2="{x:Bind RectangleCanvas.Height, Mode=OneWay}" 
                StrokeThickness="2" Stroke="{ThemeResource AppBlueAbsoluteLinearGradientBrush}">
            <UIElement.RenderTransformOrigin>
                0, 0
            </UIElement.RenderTransformOrigin>
            <UIElement.RenderTransform>
                <TranslateTransform X="0" Y="{StaticResource TimelineHeight}"/>
            </UIElement.RenderTransform>
        </Line>



        <!--AppBar-->
        <Border x:Name="AppBarBorder"  Grid.Row="1" BorderThickness="0,0,0,1" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackgroundLight}"/>
        <Border Grid.Row="3" BorderThickness="0,1,0,0" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackgroundColorDark}"/>
        <Grid x:Name="PlayGrid" Grid.Row="1" BorderThickness="0,1" HorizontalAlignment="Center">
            <elements:PlayRing x:Name="PlayRing"/>
            <Button x:Name="PlayButton" Foreground="{ThemeResource AppBlueLinearGradientBrush}" HorizontalAlignment="Center" Style="{StaticResource TextBlockButtonStyle}"
                        Visibility="{x:Bind ReverseBooleanToVisibilityConverter(ViewModel.IsPlaying), Mode=OneWay}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Play
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="Play"/>
            </Button>
            <Button x:Name="PauseButton" Foreground="{ThemeResource AppBlueLinearGradientBrush}" HorizontalAlignment="Center" Style="{StaticResource TextBlockButtonStyle}"
                        Visibility="{x:Bind BooleanToVisibilityConverter(ViewModel.IsPlaying), Mode=OneWay}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Pause
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="Pause"/>
            </Button>
        </Grid>

        <elements1:ToolTypeComboBox x:Name="ToolTypeComboBox" Grid.Row="1" HorizontalAlignment="Left"
                        Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}"
                        ToolType="{x:Bind ViewModel.ToolType, Mode=TwoWay}"/>
        <times:TimeButton x:Name="TimeButton" Grid.Row="1" Width="180" Margin="72,0,0,0" Padding="2,0" Time="{x:Bind ViewModel.Duration , Mode=TwoWay}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
            <TextBlock Margin="4,0" FontWeight="Bold" VerticalAlignment="Center">
                    <Run FontSize="24" Foreground="{ThemeResource AppBarItemForegroundThemeBrush}" Text="{x:Bind TimeSpanToStringConverter(ViewModel.Position), Mode=OneWay}"/><Run>/</Run><Run Text="{x:Bind TimeSpanToStringConverter(ViewModel.Duration), Mode=OneWay}"/>
            </TextBlock>
        </times:TimeButton>
        <StackPanel x:Name="AppBarLeftStackPanel" Grid.Row="1" Orientation="Horizontal" Margin="252,0,0,0" HorizontalAlignment="Left">
            <!--Undo-->
            <Button x:Name="UndoButton" IsEnabled="False" Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Undo
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="Undo"/>
            </Button>
            <!--Redo-->
            <Button x:Name="RedoButton" IsEnabled="False" Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Redo
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="Redo"/>
            </Button>
            <!--FullScreen-->
            <Button x:Name="FullScreenButton" Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Full Screen
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="{x:Bind BooleanToFullScreenConverter(PreviewGrid.IsFullScreen), Mode=OneWay}"/>
            </Button>
            <!--Help-->
            <Button x:Name="HelpButton" IsEnabled="False" Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Help
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="Help"/>
            </Button>
            <!--Pin-->
            <Button x:Name="PinButton" Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Pin
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="{x:Bind BooleanToPinConverter(PinCanvas.IsPositionOnPin), Mode=OneWay}"/>
            </Button>
        </StackPanel>

        <StackPanel x:Name="AppBarRightStackPanel" Grid.Row="1" Orientation="Horizontal" Margin="0,0,252,0" HorizontalAlignment="Right"
                        BorderThickness="0,0,0,1" BorderBrush="{ThemeResource AppBlueLinearGradientBrush}" Background="{ThemeResource AppBackgroundColorDark}">
            <!--Trim-->
            <Button x:Name="TrimButton" Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Trim
                    </ToolTip>
                </ToolTipService.ToolTip>
                <PathIcon>
                    <PathIcon.Data>
                        M14.523,0.381L5.135,20.208C4.978,20.541 5.12,20.938 5.453,21.096C5.785,21.253 6.183,21.111 6.34,20.779L15.728,0.952C15.886,0.619 15.744,0.222 15.411,0.064C15.079,-0.093 14.681,0.049 14.523,0.381ZM0,16.722C0,17.09 0.298,17.388 0.667,17.388L4.16,17.388C4.421,17.388 4.657,17.237 4.766,17.001L10.43,4.717C10.526,4.511 10.509,4.27 10.387,4.079C10.264,3.887 10.052,3.772 9.825,3.772L0.667,3.772C0.298,3.772 -0,4.07 0,4.438L0,16.722ZM20.864,4.438C20.864,4.07 20.565,3.772 20.197,3.772L16.703,3.772C16.443,3.772 16.207,3.923 16.098,4.159L10.433,16.443C10.338,16.649 10.355,16.89 10.477,17.081C10.6,17.273 10.811,17.388 11.039,17.388L20.197,17.388C20.565,17.388 20.864,17.09 20.864,16.722L20.864,4.438ZM1.333,16.055L1.333,5.105C1.333,5.105 8.784,5.105 8.784,5.105C8.784,5.105 3.734,16.055 3.734,16.055L1.333,16.055ZM19.53,5.105L19.53,16.055C19.53,16.055 12.08,16.055 12.08,16.055C12.08,16.055 17.13,5.105 17.13,5.105L19.53,5.105Z
                    </PathIcon.Data>
                </PathIcon>
            </Button>
            <!--Property-->
            <Button x:Name="PropertyButton" Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Property
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="Important"/>
            </Button>
            <!--Easing-->
            <Button x:Name="EasingButton" Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Easing
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="Attach"/>
            </Button>
            <!--Effect-->
            <Button x:Name="EffectButton" Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Effect
                    </ToolTip>
                </ToolTipService.ToolTip>
                <SymbolIcon Symbol="OutlineStar"/>
            </Button>
            <!--Color-->
            <Button Width="{StaticResource AppBarHeight}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                <ToolTipService.ToolTip>
                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                        Color
                    </ToolTip>
                </ToolTipService.ToolTip>
                <Button.Flyout>
                    <Flyout Placement="Left">
                        <elements:ColorPicker2 x:Name="ColorPicker" Color="DodgerBlue"/>
                    </Flyout>
                </Button.Flyout>
                <Ellipse Width="24" Height="24" StrokeThickness="1" Stroke="Gray">
                    <Ellipse.Fill>
                        <SolidColorBrush Color="{x:Bind ColorPicker.Color, Mode=OneWay}"/>
                    </Ellipse.Fill>
                </Ellipse>
            </Button>
        </StackPanel>
        <elements:TimeSlider x:Name="ScaleSlider" Grid.Row="1" Width="180" Margin="0,0,72,0" Padding="12,0" HorizontalAlignment="Right"
                        Value="{x:Bind ViewModel.TrackScale, Mode=TwoWay}" Minimum="2" Maximum="64" 
                        VerticalAlignment="Center" Foreground="{ThemeResource AppBlueLinearGradientBrush}"/>
        <Button x:Name="SpliterButton" Grid.Row="1" HorizontalAlignment="Right"
                    Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}"
                    Foreground="{ThemeResource AppBlueLinearGradientBrush}" 
                    ManipulationStarted="{x:Bind PreviewGrid.SpliterManipulationStarted,Mode=OneWay}"
                    ManipulationDelta="{x:Bind PreviewGrid.SpliterManipulationDelta,Mode=OneWay}"
                    ManipulationCompleted="{x:Bind PreviewGrid.SpliterManipulationCompleted,Mode=OneWay}"
                    Style="{StaticResource TextBlockButtonStyle}">
            <UIElement.ManipulationMode>
                TranslateY
            </UIElement.ManipulationMode>
            <SymbolIcon Symbol="GlobalNavigationButton"/>
        </Button>




        <!--Menu-->
        <Grid Grid.Row="1" Grid.RowSpan="3">

            <!--Export-->
            <transitions:IndexTransitionPanel Index="1" GroupIndex="{x:Bind GroupIndex, Mode=OneWay}">
                <Grid>
                    <Border Background="{ThemeResource SystemControlAcrylicElementBrush}"/>
                    <Border Height="{StaticResource AppBarHeight}" VerticalAlignment="Top" BorderThickness="0,1" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackgroundLight}"/>
                    <Pivot>
                        <Pivot.LeftHeader>
                            <Button x:Name="ExportBackButton" Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                                <ToolTipService.ToolTip>
                                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                                        Back
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <SymbolIcon Symbol="Back"/>
                            </Button>
                        </Pivot.LeftHeader>

                        <Pivot.RightHeader>
                            <Button x:Name="ExportOKButton" Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                                <ToolTipService.ToolTip>
                                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                                        Export
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <SymbolIcon Symbol="NewWindow"/>
                            </Button>
                        </Pivot.RightHeader>

                        <PivotItem Padding="0" Margin="0">
                            <PivotItem.Header>
                                <TextBlock FontSize="14">
                                    Video Setting
                                </TextBlock>
                            </PivotItem.Header>
                        </PivotItem>

                        <PivotItem Padding="0" Margin="0">
                            <PivotItem.Header>
                                <TextBlock FontSize="14">
                                    Audio Setting
                                </TextBlock>
                            </PivotItem.Header>
                        </PivotItem>

                    </Pivot>
                </Grid>
            </transitions:IndexTransitionPanel>

            <!--Property-->
            <transitions:IndexTransitionPanel Index="2" GroupIndex="{x:Bind GroupIndex, Mode=OneWay}">
                <Grid>
                    <Border Background="{ThemeResource SystemControlAcrylicElementBrush}"/>
                    <Border Height="{StaticResource AppBarHeight}" VerticalAlignment="Top" BorderThickness="0,1" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackgroundLight}"/>
                    <Pivot x:Name="PropertyPivot">
                        <Pivot.LeftHeader>
                            <Button x:Name="PropertyBackButton" Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                                <ToolTipService.ToolTip>
                                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                                        Back
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <SymbolIcon Symbol="Back"/>
                            </Button>
                        </Pivot.LeftHeader>

                        <Pivot.RightHeader>
                            <Button x:Name="PropertyClearButton" Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                                <ToolTipService.ToolTip>
                                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                                        Clear
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <SymbolIcon Symbol="Clear"/>
                            </Button>
                        </Pivot.RightHeader>

                        <PivotItem Padding="0" Margin="0">
                            <PivotItem.Header>
                                <TextBlock FontSize="14">
                                     Video
                                </TextBlock>
                            </PivotItem.Header>
                        </PivotItem>

                        <PivotItem Padding="0" Margin="0">
                            <PivotItem.Header>
                                <TextBlock FontSize="14">
                                    Audio
                                </TextBlock>
                            </PivotItem.Header>
                        </PivotItem>

                        <PivotItem Padding="0" Margin="0">
                            <PivotItem.Header>
                                <TextBlock FontSize="14">
                                    Image
                                </TextBlock>
                            </PivotItem.Header>
                        </PivotItem>

                        <PivotItem Padding="0" Margin="0">
                            <PivotItem.Header>
                                <TextBlock FontSize="14">
                                    Color
                                </TextBlock>
                            </PivotItem.Header>
                        </PivotItem>

                        <PivotItem Padding="0" Margin="0">
                            <PivotItem.Header>
                                <TextBlock FontSize="14">
                                    Text
                                </TextBlock>
                            </PivotItem.Header>
                        </PivotItem>

                        <PivotItem Padding="0" Margin="0">
                            <PivotItem.Header>
                                <TextBlock FontSize="14">
                                    Subtitle
                                </TextBlock>
                            </PivotItem.Header>
                        </PivotItem>

                    </Pivot>
                </Grid>
            </transitions:IndexTransitionPanel>

            <!--Transition-->
            <transitions:IndexTransitionPanel Index="3" GroupIndex="{x:Bind GroupIndex, Mode=OneWay}">
                <Grid>
                    <Border Background="{ThemeResource SystemControlAcrylicElementBrush}"/>
                    <Border Height="{StaticResource AppBarHeight}" VerticalAlignment="Top" BorderThickness="0,1" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackgroundLight}"/>
                    <Pivot x:Name="TransitionPivot">
                        <Pivot.LeftHeader>
                            <Button x:Name="TransitionBackButton" Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                                <ToolTipService.ToolTip>
                                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                                        Back
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <SymbolIcon Symbol="Back"/>
                            </Button>
                        </Pivot.LeftHeader>

                        <Pivot.RightHeader>
                            <Button x:Name="TransitionClearButton" Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                                <ToolTipService.ToolTip>
                                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                                        Clear
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <SymbolIcon Symbol="Clear"/>
                            </Button>
                        </Pivot.RightHeader>

                    </Pivot>
                </Grid>
            </transitions:IndexTransitionPanel>

            <!--Easing-->
            <transitions:IndexTransitionPanel Index="4" GroupIndex="{x:Bind GroupIndex, Mode=OneWay}">
                <Grid>
                    <Border Background="{ThemeResource SystemControlAcrylicElementBrush}"/>
                    <Border Height="{StaticResource AppBarHeight}" VerticalAlignment="Top" BorderThickness="0,1" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackgroundLight}"/>
                    <easings:EasingControl x:Name="EasingControl">
                        <easings:EasingControl.LeftHeader>
                            <Button x:Name="EasingBackButton" Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                                <ToolTipService.ToolTip>
                                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                                        Back
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <SymbolIcon Symbol="Back"/>
                            </Button>
                        </easings:EasingControl.LeftHeader>
                    </easings:EasingControl>
                </Grid>
            </transitions:IndexTransitionPanel>

            <!--Effect-->
            <transitions:IndexTransitionPanel Index="5" GroupIndex="{x:Bind GroupIndex, Mode=OneWay}">
                <Grid>
                    <Border Background="{ThemeResource SystemControlAcrylicElementBrush}"/>
                    <Border Height="{StaticResource AppBarHeight}" VerticalAlignment="Top" BorderThickness="0,1" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackgroundLight}"/>
                    <Pivot>

                        <Pivot.LeftHeader>
                            <Button x:Name="EffectBackButton" Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                                <ToolTipService.ToolTip>
                                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                                        Back
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <SymbolIcon Symbol="Back"/>
                            </Button>
                        </Pivot.LeftHeader>

                        <Pivot.RightHeader>
                            <Button x:Name="EffectCleanButton" Width="{StaticResource TrackLeftWidth}" Height="{StaticResource AppBarHeight}" Foreground="{ThemeResource AppBlueLinearGradientBrush}" Style="{StaticResource TextBlockButtonStyle}">
                                <ToolTipService.ToolTip>
                                    <ToolTip Style="{StaticResource AppToolTipStyle}">
                                        Clean
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <SymbolIcon Symbol="Delete"/>
                            </Button>
                        </Pivot.RightHeader>

                    </Pivot>
                </Grid>
            </transitions:IndexTransitionPanel>

        </Grid>



        <!--Loading-->
        <ContentDialog x:Name="LoadingDialog" Grid.RowSpan="4">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="100"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <ProgressRing Width="28" Height="28" IsActive="{x:Bind IsLoading, Mode=OneWay}"/>
                <TextBlock Grid.Row="1" HorizontalAlignment="Center">
                    Loading
                </TextBlock>
            </Grid>
        </ContentDialog>

    </Grid>
</Page>